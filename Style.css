:root{
  --bg:#eef5ff;
  --card:#ffffff;
  --ink:#1c2333;
  --muted:#6b7280;
  --brand:#4f46e5;
  --brand-2:#22c55e;
  --danger:#ef4444;
  --gold:#f59e0b;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:var(--bg); color:var(--ink);
}

/* Top bar */
#top-bar{
  display:flex; justify-content:space-between; align-items:center;
  padding:10px 14px; background:var(--card); border-bottom:1px solid #e5e7eb;
  position:sticky; top:0; z-index:10;
}
#top-bar .left{display:flex; align-items:center; gap:12px}
.avatar{width:56px; height:56px; border-radius:50%; object-fit:cover; border:3px solid var(--brand)}
.coins{font-weight:700; font-size:1.2rem}

/* main */
main{max-width:900px; margin:0 auto; padding:16px}
h1{margin:16px 0 8px}
#progress-wrap{margin:10px 0 18px}
#progress-wrap .bar{width:100%; height:10px; background:#e5e7eb; border-radius:999px; overflow:hidden}
#progress-bar{display:block; height:100%; width:0%; background:linear-gradient(90deg,var(--brand),var(--brand-2))}

#exercise-area{
  background:var(--card); border-radius:16px; padding:18px; 
  box-shadow:0 6px 20px rgba(28,35,51,.08); min-height:220px;
  display:grid; place-items:center; text-align:center;
}
.q-title{font-size:1.2rem; margin-bottom:6px}
.grid-options{
  display:grid; gap:12px; margin-top:10px;
  grid-template-columns:repeat(2, minmax(120px,1fr));
}
.option-btn{
  padding:14px 18px; font-size:1.05rem; font-weight:700; border:0;
  border-radius:12px; cursor:pointer; background:#f1f5f9; transition:.18s;
}
.option-btn:active{transform:scale(.98)}
.option-btn.correct{background:#d1fae5}
.option-btn.incorrect{background:#fee2e2}

/* buttons */
button{
  border:0; border-radius:10px; padding:10px 14px; cursor:pointer; font-weight:700;
  background:#e5e7eb; color:#111827;
}
button.primary{background:var(--brand); color:#fff}
button.secondary{background:#e5e7eb}
button.danger{background:var(--danger); color:#fff}
button.hidden{display:none}

/* Modal */
.modal{position:fixed; inset:0; background:rgba(0,0,0,.45); display:flex; align-items:center; justify-content:center; padding:16px}
.modal.hidden{display:none}
.modal-card{
  width:min(900px,100%); background:var(--card); border-radius:18px; padding:18px;
  box-shadow:0 20px 40px rgba(0,0,0,.18);
}
.modal-large{max-height:min(90vh,820px); overflow:auto}
.modal-actions{display:flex; gap:10px; justify-content:flex-end; margin-top:10px}

/* Avatars */
.avatar-options, .store-grid{
  display:grid; gap:12px; grid-template-columns:repeat(auto-fit,minmax(90px,1fr)); margin:12px 0;
}
.avatar-card{
  border:2px solid transparent; border-radius:14px; padding:10px; background:#f8fafc; text-align:center;
}
.avatar-card img{width:80px; height:80px; object-fit:cover; border-radius:50%}
.avatar-card .price{font-weight:800; color:var(--gold); margin-top:6px}
.avatar-card.locked{opacity:.75}
.avatar-card:hover{border-color:#c7d2fe}
.avatar-card button{margin-top:8px; width:100%}

/* Animación monedas */
#coin-animation{position:absolute; inset:0; pointer-events:none}
.coin{position:absolute; font-size:2rem; animation:fall 900ms linear forwards}
@keyframes fall{
  from{transform:translateY(-10px); opacity:1}
  to{transform:translateY(160px); opacity:0}
}

/* Confetti */
#confetti{position:absolute; inset:0; pointer-events:none; overflow:hidden}
.confetti-piece{position:absolute; width:10px; height:10px; animation:confetti-fall 2.8s linear forwards}
@keyframes confetti-fall{
  from{transform:translateY(-20px) rotate(0deg)}
  to{transform:translateY(700px) rotate(720deg)}
}

/* Tips */
.tips{background:#f0fdf4; border:1px solid #bbf7d0; padding:12px; border-radius:12px; margin-top:10px}
.tips h3{margin:0 0 6px}

/* Helpers */
.hidden{display:none}

/* Responsive: iPad portrait y móviles */
@media (max-width: 900px){
  .grid-options{grid-template-columns:repeat(2, minmax(110px,1fr))}
}
@media (max-width: 600px){
  #top-bar{flex-direction:column; gap:8px}
  .grid-options{grid-template-columns:repeat(2, minmax(100px,1fr))}
  .option-btn{padding:12px 10px}
  .avatar{width:52px; height:52px}
}
@media (max-width: 420px){
  .grid-options{grid-template-columns:repeat(2, minmax(90px,1fr))}
  .option-btn{font-size:1rem}
}
